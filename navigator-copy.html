
<!DOCTYPE html>
<html lang='en'>
<head>
    <meta charset='UTF-8'>
    <title>Fingerprint</title>
    <script src='http://cdnjs.cloudflare.com/ajax/libs/knockout/3.4.0/knockout-min.js'></script>
</head>
<body>
<h2>Fingerprint = </h2>
<p id='fingerprint-p'></p>

<h2>navigator</h2>
<p id='navigator-p'></p>

<h2>screen</h2>
<p id='screen-p'></p>

<h2>request headers</h2>
<p id='response-p'></p>

<h2>plugins</h2>
<p id='plugin-p'></p>


<h2>mimeTypes</h2>
<p id='mimeType-p'></p>

<script type='text/javascript'>

    function NavigatorViewModel() {
        var self = this;

        self.getScreenString = function() {
            self.screen = {};
            self.screen.props = {};
            for (var prop in screen) {
                if (typeof screen[prop] != 'function' && typeof screen[prop] != 'object') {
                    self.screen.props[prop] = screen[prop];
                }

            }
            var screenString = '"screen": {' + '<br/>';
            for (var prop in self.screen.props) {
                // &emsp; = tab
                if (typeof self.screen.props[prop] == "boolean") {
                    screenString = screenString + '&emsp;"' + prop + '": ' + '' + self.screen.props[prop] + ',<br/>';
                }
                else {
                    screenString = screenString + '&emsp;"' + prop + '": ' + '"' + self.screen.props[prop] + '",<br/>';
                }
            }

            screenString = screenString.substr(0, screenString.length - 6);
            screenString = screenString + '<br/>};';
            return screenString;
        };

        self.getHeadersString = function() {
            var req = new XMLHttpRequest();
            req.open("GET", 'http://httpbin.org/headers', false);
            req.send(null);
            var response = JSON.parse(req.response);
            var headers = response.headers;
            delete(headers.Referer);
            var headersString = '"headers": {' + '<br/>';
            for (var prop in headers) {
                if (prop.toLowerCase() == 'host' || prop.toLowerCase() == 'origin') {
                    continue;
                }
                // &emsp; = tab
                if (typeof self.screen.props[prop] == "boolean") {
                    headersString = headersString + '&emsp;"' + prop + '": ' + '' + headers[prop] + ',<br/>';
                }
                else {
                    headersString = headersString + '&emsp;"' + prop + '": ' + '"' + headers[prop] + '",<br/>';
                }
            }

            headersString = headersString.substr(0, headersString.length - 6);
            headersString = headersString + '<br/>};';
            return headersString;
        };

        self.getMimeTypeString = function() {
            var mimeType_string = '"mimeTypes": [' + '<br/>';
            for (var mimeType in navigator["mimeTypes"]) {
                if (typeof navigator["mimeTypes"][mimeType] == "object") {
                    mimeType_string = mimeType_string + '&emsp;{' + '"description": "' + navigator["mimeTypes"][mimeType]["description"] + '", "type": "' + (navigator["mimeTypes"][mimeType]["type"] || "") + '"},<br/>';
                }
            }

            mimeType_string = mimeType_string.substr(0, mimeType_string.length - 6);
            mimeType_string = mimeType_string + '<br/>];';
            return mimeType_string;
        };


        self.getPluginString = function() {
            var pluginString = '"plugins": [' + '<br/>';
            for (var plugin in navigator["plugins"]) {
                if (typeof navigator["plugins"][plugin] == "object") {
                    pluginString = pluginString + '&emsp;{' +  '"name": "' + navigator["plugins"][plugin]["name"] + '", "version": "' + (navigator["plugins"][plugin]["version"] || "") + '"},<br/>';
                }
            }

            pluginString = pluginString.substr(0, pluginString.length - 6);
            pluginString = pluginString + '<br/>];';
            return pluginString;
        };

        self.getNavigatorString = function() {
            self.navigator = {};
            self.navigator.props = {}
            for (var prop in window.navigator) {
                if (typeof window.navigator[prop] != 'function' && typeof window.navigator[prop] != 'object') {
                    self.navigator.props[prop] = window.navigator[prop];
                }

            }
            var navigatorString = '"navigator": {' + '<br/>';
            for (var prop in self.navigator.props) {
                // &emsp; = tab
                if (typeof self.navigator.props[prop] == "boolean") {
                    navigatorString = navigatorString + '&emsp;"' + prop + '": ' + '' + self.navigator.props[prop] + ',<br/>';
                }
                else {
                    navigatorString = navigatorString + '&emsp;"' + prop + '": ' + '"' + self.navigator.props[prop] + '",<br/>';
                }
            }

            navigatorString = navigatorString.substr(0, navigatorString.length - 5);
            navigatorString = navigatorString + '<br/>';
            var pluginString = self.getPluginString();
            pluginString = pluginString.substring(0, pluginString.length - 1) + ',<br/>';
            navigatorString = navigatorString + pluginString;
            var mimeType_string = self.getMimeTypeString();
            mimeType_string = mimeType_string.substring(0, mimeType_string.length - 1) + '<br/>';
            navigatorString = navigatorString + mimeType_string;
            navigatorString = navigatorString + '<br/>};';
            return navigatorString;
        };


        var navigatorString = self.getNavigatorString();
        var np = document.getElementById('navigator-p');
        np.innerHTML = navigatorString;

        var screenString = self.getScreenString();

        var sp = document.getElementById('screen-p');
        sp.innerHTML = screenString;


        var headersString = self.getHeadersString();
        var rp = document.getElementById('response-p');
        rp.innerHTML = headersString;

        var pluginString = self.getPluginString();
        var pp = document.getElementById('plugin-p');
        pp.innerHTML = pluginString;

        var mimeTypeString = self.getMimeTypeString();
        var mp = document.getElementById('mimeType-p');
        mp.innerHTML = mimeTypeString;


        var fingerprintString = '{<br/>' + headersString.substring(0, headersString.length - 1) + ',<br/>' + screenString.substring(0,screenString.length - 1) + ',<br/>' + navigatorString.substring(0, navigatorString.length - 1) + '<br/>};';
        var fp = document.getElementById('fingerprint-p');
        fp.innerHTML = fingerprintString;
    }

    document.addEventListener("DOMContentLoaded", function () {
        ko.applyBindings(new NavigatorViewModel());
    });
</script>
</body>
</html>
